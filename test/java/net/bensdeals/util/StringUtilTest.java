package net.bensdeals.util;

import net.bensdeals.support.RobolectricTestRunnerWithInjection;
import org.junit.Test;
import org.junit.runner.RunWith;

import static com.pivotallabs.robolectricgem.expect.Expect.expect;

@RunWith(RobolectricTestRunnerWithInjection.class)
public class StringUtilTest {

    @Test
    public void shouldReadStreamToString() throws Exception {
        String homepage = StringUtil.fromStream(StringUtil.responseAsStream("homepage"));
        expect(homepage).toEqual("<?xml version=\"1.0\" encoding=\"utf-8\" ?><rss version=\"2.0\" xmlns:atom=\"http://www.w3.org/2005/Atom\"><channel><title>Ben's Bargains - Latest Headlines</title><link>http://bensbargains.net/rss/</link><description>Where ghetto dogs come for the lowdown on deals</description><atom:link href=\"http://bensbargains.net/rss/\" rel=\"self\" type=\"application/rss+xml\" /><language>en-us</language><copyright>Copyright (C) BensBargains.net</copyright><item><title><![CDATA[3-Year Subscription to Muscle &amp; Fitness $9.58 at DiscountMags]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn2.bensimages.com/img118828.jpg\" />Today only. DiscountMags has a 3-Year Subscription to Muscle & Fitness Magazine (36 issues) for $59.97 - $50.39 off with coupon code <B>7938</b> = <B>$9.58</b> with free shipping.  A two-year subscription is <b>$7.18</b> and a one-year subscription is <b>$3.99</b> with same code.    [<a                 rel=\"nofollow\" href=\"/link/3-year-subscription-to-muscle-amp-fitness-9-58-at-discountmags-253527/?linkid=0\" target=\"_new\">Compare</a>]]]></description><link>http://bensbargains.net/deal/3-year-subscription-to-muscle-amp-fitness-9-58-at-discountmags-253527/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/3-year-subscription-to-muscle-amp-fitness-9-58-at-discountmags-253527/</guid><pubDate>Sat, 05 May 2012 10:42:48 -0700</pubDate></item><item><title><![CDATA[All New T-Shirts $8 at LOLShirts]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn1.bensimages.com/img118845.jpg\" />LOLShirts is offering all of their newly released T-Shirts on sale for <b>$8</b> with coupon code <b>NEWNESS</b>. Shipping is free with the same code. XXL and XXXL sizes cost $1 more.              [<a               rel=\"nofollow\" href=\"/link/all-new-t-shirts-8-at-lolshirts-253552/?linkid=0\" target=\"_new\">Compare</a>]]]></description><link>http://bensbargains.net/deal/all-new-t-shirts-8-at-lolshirts-253552/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/all-new-t-shirts-8-at-lolshirts-253552/</guid><pubDate>Sat, 05 May 2012 10:34:15 -0700</pubDate></item><item><title><![CDATA[Garden Radiance Stainless Steel Pyramid Patio Heater $200 at eBay]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn2.bensimages.com/img118838.jpg\" />eBay with Factory Authorized Outlet has the Garden Radiance Stainless Steel / Black Pyramid Patio Heater (GRP4000BK) for <b>$200</b> with free shipping. Features 50\" ceramic glass flame tube, 34,000 BTUs variable control, and 15-ft heating diameter.     [<a     rel=\"nofollow\" href=\"/link/garden-radiance-stainless-steel-pyramid-patio-heater-200-at-ebay-253542/?linkid=0\" target=\"_new\">Compare</a>]   ]]></description><link>http://bensbargains.net/deal/garden-radiance-stainless-steel-pyramid-patio-heater-200-at-ebay-253542/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/garden-radiance-stainless-steel-pyramid-patio-heater-200-at-ebay-253542/</guid><pubDate>Sat, 05 May 2012 10:25:03 -0700</pubDate></item><item><title><![CDATA[Samsung Galaxy Note 3G/4G Unlocked GSM Smart Phone $499 at Expansys]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn.bensimages.com/img112390.jpg\" />Expansys has the Samsung Galaxy Note GT-N7000 3G/4G HSDPA Unlocked GSM Smart Phone (Black) for <b>$499</b> with free shipping.        [<a             rel=\"nofollow\" href=\"/link/samsung-galaxy-note-3g-4g-unlocked-gsm-smart-phone-499-at-expansys-253531/?linkid=0\" target=\"_new\">Compare</a>]<br><br><li>Android 2.3 OS, 1.4GHz dual core processor, 16GB memory<br><li>802.11 a/b/g/n, 2,500 mAh li-ion, bluetooth 3.0, barometer<br><li>5.3â€ WXGA AMOLED display, 1080pHD recording, 8MP camera ]]></description><link>http://bensbargains.net/deal/samsung-galaxy-note-3g-4g-unlocked-gsm-smart-phone-499-at-expansys-253531/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/samsung-galaxy-note-3g-4g-unlocked-gsm-smart-phone-499-at-expansys-253531/</guid><pubDate>Sat, 05 May 2012 10:10:10 -0700</pubDate></item><item><title><![CDATA[Marpac Foxfire LED Bike Headlight $18 at NoMoreRack]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn1.bensimages.com/img118843.jpg\" />Ends 5/7 at 9PM PST. NoMoreRack has the Marpac FHL-1W2 Foxfire LED Bicycle Headlight for $16 + $2 shipping = <b>$18 shipped</b>. Features aluminum weather-resistant housing, 1W LED, quick-release bike mount, and flash function.   [<a   rel=\"nofollow\" href=\"/link/marpac-foxfire-led-headlight-18-at-nomorerack-253550/?linkid=0\" target=\"_new\">Compare</a>] ]]></description><link>http://bensbargains.net/deal/marpac-foxfire-led-headlight-18-at-nomorerack-253550/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/marpac-foxfire-led-headlight-18-at-nomorerack-253550/</guid><pubDate>Sat, 05 May 2012 10:01:43 -0700</pubDate></item><item><title><![CDATA[Denon AVR-2112CI 7.1-Ch 3D Network Receiver $400 at Electronics Expo]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn.bensimages.com/img118712.jpg\" />Electronics Expo has the Denon AVR-2112CI 7.1-Ch 3D Network Receiver for $385 - $15 off with coupon code <B>GOGREEN</B> + $30 shipping = <B>$400 shipped</B>.  Features  HDMI v1.4a 3D support, AirPlay compatibility, Audyssey MultEQ XT, and Ethernet, USB, and six HDMI inputs.     [<a          rel=\"nofollow\" href=\"/link/denon-avr-2112ci-7-1-ch-3d-network-receiver-400-at-electronics-expo-253528/?linkid=0\" target=\"_new\">Compare</a>]]]></description><link>http://bensbargains.net/deal/denon-avr-2112ci-7-1-ch-3d-network-receiver-400-at-electronics-expo-253528/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/denon-avr-2112ci-7-1-ch-3d-network-receiver-400-at-electronics-expo-253528/</guid><pubDate>Sat, 05 May 2012 09:53:14 -0700</pubDate></item><item><title><![CDATA[LIAN LI PC-7FN USB 3.0 ATX Mid Tower Case $60 at Newegg]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn2.bensimages.com/img70859.jpg\" />Newegg has the LIAN LI PC-7FN USB 3.0 Black Aluminum ATX Mid Tower Computer Case for $80 - $20 off with coupon code <B>LianLi504B</b> [Exp 5/6] = <b>$60</b> with free shipping. Case features one USB 3.0 port, five external 5.25\" drive bays, four internal 3.5\" drive bays, one 120mm rear fan, and one 140mm front blue LED fan.         [<a         rel=\"nofollow\" href=\"/link/lian-li-pc-7fn-usb-3-0-atx-mid-tower-case-60-at-newegg-253533/?linkid=0\" target=\"_new\">Compare</a>]]]></description><link>http://bensbargains.net/deal/lian-li-pc-7fn-usb-3-0-atx-mid-tower-case-60-at-newegg-253533/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/lian-li-pc-7fn-usb-3-0-atx-mid-tower-case-60-at-newegg-253533/</guid><pubDate>Sat, 05 May 2012 09:33:47 -0700</pubDate></item><item><title><![CDATA[Rock &amp; Republic Men's Motorcycle Jacket $51 at Kohls]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn1.bensimages.com/img118834.jpg\" />Kohls has the Rock & Republic Men's Motorcycle Jacket for $64 - 20% off with coupon code <b>MFF20AFF</b> [Exp 5/6] + $0 shipping with coupon code <B>FIFTY4FS</B> [Exp 5/6] = <b>$51 shipped</b>. Features stitched bands and patches, snap-tab collar, 1/4-zip sleeves, and one interior pocket.    [<a    rel=\"nofollow\" href=\"/link/rock-amp-republic-men-s-motorcycle-jacket-52-at-kohls-253540/?linkid=0\" target=\"_new\">Compare</a>]  ]]></description><link>http://bensbargains.net/deal/rock-amp-republic-men-s-motorcycle-jacket-52-at-kohls-253540/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/rock-amp-republic-men-s-motorcycle-jacket-52-at-kohls-253540/</guid><pubDate>Sat, 05 May 2012 09:24:09 -0700</pubDate></item><item><title><![CDATA[24-Pack Philips Long Life AA Batteries $5 at eBay]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn1.bensimages.com/img116046.jpg\" />eBay with Daily Steals has the 24-Pack of Philips Long Life AA Batteries for <B>$5</B> with free shipping. Features zinc carbon eco-friendly material, long-lasting performance, and comes in six 4-packs.       [<a       rel=\"nofollow\" href=\"/link/24-pack-philips-long-life-aa-batteries-5-at-ebay-253541/?linkid=0\" target=\"_new\">Compare</a>]]]></description><link>http://bensbargains.net/deal/24-pack-philips-long-life-aa-batteries-5-at-ebay-253541/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/24-pack-philips-long-life-aa-batteries-5-at-ebay-253541/</guid><pubDate>Sat, 05 May 2012 09:23:22 -0700</pubDate></item><item><title><![CDATA[Husky 16 Gauge 2-1/2 in. Finish Nailer $50 at Home Depot]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn2.bensimages.com/img92719.jpg\" />Today only. Home Depot has the Husky 16 Gauge 2-1/2\" Finish Nailer (H250SFA) for <b>$50</b> with free shipping.  Features nail depth adjustment, jam clearing, adjustable exhaust, side-loading magazine and holds up to 100 16 gauge fasteners.    [<a   rel=\"nofollow\" href=\"/link/husky-16-gauge-2-1-2-in-finish-nailer-50-at-home-depot-253543/?linkid=0\" target=\"_new\">Compare</a>]]]></description><link>http://bensbargains.net/deal/husky-16-gauge-2-1-2-in-finish-nailer-50-at-home-depot-253543/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/husky-16-gauge-2-1-2-in-finish-nailer-50-at-home-depot-253543/</guid><pubDate>Sat, 05 May 2012 09:16:45 -0700</pubDate></item><item><title><![CDATA[Hannspree ST289MUB 28\" 1080p LCD HDTV $185 at Mwave]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn.bensimages.com/img63781.jpg\" />Mwave has the <i>refurbished</i> Hannspree ST289MUB 28\" 1080p LCD HDTV Monitor for <b>$185</b> with free shipping.        [<a                     rel=\"nofollow\" href=\"/link/hannspree-st289mub-28-1080p-lcd-hdtv-185-at-mwave-253508/?linkid=0\" target=\"_new\">Compare</a>]<br><br><li>1920 x 1080, ATSC/NTSC/QAM tuners, 5 ms response<br><li>10000:1 dynamic contrast ratio, 2 HDMI ports]]></description><link>http://bensbargains.net/deal/hannspree-st289mub-28-1080p-lcd-hdtv-185-at-mwave-253508/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/hannspree-st289mub-28-1080p-lcd-hdtv-185-at-mwave-253508/</guid><pubDate>Sat, 05 May 2012 09:14:33 -0700</pubDate></item><item><title><![CDATA[25% off Orders at Dell Financial Services]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn.bensimages.com/img118832.jpg\" />Through May 6th, Dell Financial Services is taking 25% off your entire order, no minimum, with coupon code <B>Weekend25%</B>. Cannot be combined with any other coupons.]]></description><link>http://bensbargains.net/deal/25-off-orders-at-dell-financial-services-253535/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/25-off-orders-at-dell-financial-services-253535/</guid><pubDate>Sat, 05 May 2012 09:02:25 -0700</pubDate></item><item><title><![CDATA[1-Year Subscription to Saveur Magazine $4.99 at Tanga]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn.bensimages.com/img118830.jpg\" />Ends 5/6 at 7AM PDT. Tanga has a 1-Year Subscription to Saveur Magazine for $19.99 - $15.00 off with coupon code <B>BENSBARGAINS</B> = <B>$4.99</B> with free shipping. Explores the authentic cuisines of the world, tracks recipes and ingredients to their places of origin and illuminates their history, traditions and local flavors. A 2-year subscription is available at this rate with same code. [<a  rel=\"nofollow\" href=\"/link/1-year-subscription-to-saveur-magazine-4-99-at-tanga-253529/?linkid=0\" target=\"_new\">Compare</a>] ]]></description><link>http://bensbargains.net/deal/1-year-subscription-to-saveur-magazine-4-99-at-tanga-253529/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/1-year-subscription-to-saveur-magazine-4-99-at-tanga-253529/</guid><pubDate>Sat, 05 May 2012 08:52:28 -0700</pubDate></item><item><title><![CDATA[Craftsman 5/8 in. x 50 ft. All Rubber Garden Hose $20 at Sears]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn.bensimages.com/img70500.jpg\" />Sears has the Craftsman 5/8 in. x 50 ft. All Rubber Garden Hose for <B>$20</B> with free in-store pickup or $12 shipping. Features concave hexagonal shape, crush-proof brass coupler, 500 psi burst strength and a lifetime warranty.  [<a   rel=\"nofollow\" href=\"/link/craftsman-5-8-in-x-50-ft-all-rubber-garden-hose-20-at-sears-253536/?linkid=0\" target=\"_new\">Compare</a>]]]></description><link>http://bensbargains.net/deal/craftsman-5-8-in-x-50-ft-all-rubber-garden-hose-20-at-sears-253536/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/craftsman-5-8-in-x-50-ft-all-rubber-garden-hose-20-at-sears-253536/</guid><pubDate>Sat, 05 May 2012 08:44:54 -0700</pubDate></item><item><title><![CDATA[$5 off Orders $5 or more at Payless Shoes]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn1.bensimages.com/img118835.jpg\" />Through May 6th, Payless Shoes is taking $5 off orders $5 or more with coupon code <B>72625</B>. Standard shipping is $6 or have it shipped to store for free. Or use this <a  rel=\"nofollow\" href=\"/link/-5-off-orders-5-or-more-at-payless-shoes-253539/?linkid=0\" target=\"_new\">printable coupon</a> for in-store purchases (<a  rel=\"nofollow\" href=\"/link/-5-off-orders-5-or-more-at-payless-shoes-253539/?linkid=1\" target=\"_new\">store locator</a>).]]></description><link>http://bensbargains.net/deal/-5-off-orders-5-or-more-at-payless-shoes-253539/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/-5-off-orders-5-or-more-at-payless-shoes-253539/</guid><pubDate>Sat, 05 May 2012 08:35:20 -0700</pubDate></item><item><title><![CDATA[Corsair CAFA50 120mm CPU Cooler $9 at Tiger Direct]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn.bensimages.com/img110232.jpg\" />Tiger Direct has the Corsair CAFA50 120mm CPU Cooler for $25  - <a  rel=\"nofollow\" href=\"/link/corsair-cafa50-120mm-cpu-cooler-9-at-tiger-direct-253537/?linkid=0\" target=\"_new\">$20 rebate</a> [Exp 5/7] + $4 shipping = <B>$9 shipped</b>. Features up to 61 CFM air flow at 31.5 dBA noise level, and fits Intel LGA 775, LGA 1366, LGA 1156, and AMD Core AM2 & AM3 processors.                 [<a                 rel=\"nofollow\" href=\"/link/corsair-cafa50-120mm-cpu-cooler-9-at-tiger-direct-253537/?linkid=1\" target=\"_new\">Compare</a>]]]></description><link>http://bensbargains.net/deal/corsair-cafa50-120mm-cpu-cooler-9-at-tiger-direct-253537/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/corsair-cafa50-120mm-cpu-cooler-9-at-tiger-direct-253537/</guid><pubDate>Sat, 05 May 2012 08:28:07 -0700</pubDate></item><item><title><![CDATA[Up to 80% off in Clearance + Extra 20% off + $1 Shipping at Kohls]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn1.bensimages.com/img82246.jpg\" />Kohls is offering an extra 20% off all purchases, no minimum, with coupon code <b>MFF20AFF</b> [Exp 5/6]. Applies to items in their <a  rel=\"nofollow\" href=\"/link/up-to-80-off-in-clearance-extra-20-off-1-shipping-at-kohls-253538/?linkid=0\" target=\"_new\">Final Clearance section</a> which are already reduced 60% to 80% off. Shipping is $0.99 per item through 5/6; free shipping on $50+ with stackable code <b>FIFTY4FS</b> [Exp 5/6].]]></description><link>http://bensbargains.net/deal/up-to-80-off-in-clearance-extra-20-off-1-shipping-at-kohls-253538/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/up-to-80-off-in-clearance-extra-20-off-1-shipping-at-kohls-253538/</guid><pubDate>Sat, 05 May 2012 08:26:27 -0700</pubDate></item><item><title><![CDATA[Crucial M4 2.5\" 256GB SATA III MLC SSD $200 at Buy.com]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn2.bensimages.com/img99408.jpg\" />Buy.com has the Crucial M4 CT256M4SSD2 2.5\" 256GB SATA III MLC Internal Solid State Drive (SSD) for <B>$200</b> with free shipping. Features up to 415MB/s read and up to 260MB/s write speeds and a 3 year warranty.    [<a                                 rel=\"nofollow\" href=\"/link/crucial-m4-2-5-256gb-sata-iii-mlc-ssd-200-at-buy-com-253532/?linkid=0\" target=\"_new\">Compare</a>]]]></description><link>http://bensbargains.net/deal/crucial-m4-2-5-256gb-sata-iii-mlc-ssd-200-at-buy-com-253532/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/crucial-m4-2-5-256gb-sata-iii-mlc-ssd-200-at-buy-com-253532/</guid><pubDate>Sat, 05 May 2012 08:21:41 -0700</pubDate></item><item><title><![CDATA[MartinLogan MLT-2 Home Theater System $300 at Newegg]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn2.bensimages.com/img99607.jpg\" />Newegg has the MartinLogan MLT-2 5.1-Channel Home Theater System for $600 - $300 off with coupon code <B>EMCYTZT1534</B> [Exp 5/6] = <B>$300</b> with free shipping.   [<a  rel=\"nofollow\" href=\"/link/martinlogan-mlt-2-home-theater-system-300-at-newegg-253520/?linkid=0\" target=\"_new\">Amazon Reviews</a> : <a  rel=\"nofollow\" href=\"/link/martinlogan-mlt-2-home-theater-system-300-at-newegg-253520/?linkid=1\" target=\"_new\">Compare</a>]<br><br><li>4 x front/surround speakers, 1 x center channel speaker<br><li>1 x subwoofer (360 watts peak), Wall mount option]]></description><link>http://bensbargains.net/deal/martinlogan-mlt-2-home-theater-system-300-at-newegg-253520/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/martinlogan-mlt-2-home-theater-system-300-at-newegg-253520/</guid><pubDate>Sat, 05 May 2012 08:16:02 -0700</pubDate></item><item><title><![CDATA[6-pack Star Wars Tin Carry-All Boxes $27 at Graveyardmall]]></title><description><![CDATA[<img align=\"right\" src=\"http://cdn1.bensimages.com/img118833.jpg\" />Graveyardmall has a 6-pack of Star Wars Tin Carry-All Lunch Boxes for $20 + $7 shipping = <b>$27 shipped</b>. Includes three sets of two boxes, each measuring 7.75\" x 6\" x 2.75\".    [<a   rel=\"nofollow\" href=\"/link/6-pack-star-wars-tin-carry-all-boxes-27-at-graveyardmall-253534/?linkid=0\" target=\"_new\">Compare</a>]]]></description><link>http://bensbargains.net/deal/6-pack-star-wars-tin-carry-all-boxes-27-at-graveyardmall-253534/?referrer=rss</link><guid isPermaLink=\"false\">http://bensbargains.net/deal/6-pack-star-wars-tin-carry-all-boxes-27-at-graveyardmall-253534/</guid><pubDate>Sat, 05 May 2012 08:08:08 -0700</pubDate></item></channel></rss><!-- cached -->");
    }
}
